---
// src/pages/blog/[slug].astro
import { getCollection } from 'astro:content';
import Button from 'src/components/atoms/Button.astro';
// 1. IMPORTAMOS LOS DATOS
import { siteData } from 'src/data/siteData';
import Layout from 'src/layouts/Layout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('tips');
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={`${entry.data.title} | Blog Beauty Salon`} description={entry.data.description}>
  <header class="relative h-[50vh] min-h-[400px]">
    <div class="absolute inset-0">
      <img src={entry.data.image} alt={entry.data.title} class="h-full w-full object-cover" />
      <div class="absolute inset-0 bg-glam-navy/60"></div>
    </div>

    <div
      class="container relative mx-auto flex h-full flex-col items-center justify-center px-4 text-center"
    >
      <span class="mb-4 font-bold uppercase tracking-widest text-pink-300">
        {entry.data.publishDate.toLocaleDateString('es-AR', { dateStyle: 'long' })}
      </span>
      <h1 class="max-w-4xl font-serif text-4xl font-bold leading-tight text-white md:text-6xl">
        {entry.data.title}
      </h1>
    </div>
  </header>

  <article class="container mx-auto max-w-3xl px-4 py-16">
    <div
      class="prose prose-lg prose-headings:font-serif prose-headings:text-glam-navy prose-p:text-glam-gray prose-a:text-pink-500 hover:prose-a:text-pink-600 prose-blockquote:border-l-pink-400 prose-li:text-glam-gray"
    >
      <Content />
    </div>

    <div class="mt-12 flex items-center justify-between border-t border-gray-100 pt-8">
      <Button href="/blog" variant="outline">‚Üê Volver al Blog</Button>

      <Button href={siteData.info.whatsappLink} variant="primary"> Consultar por este tema </Button>
    </div>
  </article>
</Layout>
