---
// src/components/molecules/TipCard.astro
import type { CollectionEntry } from 'astro:content';

import Heading from '../atoms/Heading.astro';

interface Props {
  post: CollectionEntry<'tips'>;
}

const { post } = Astro.props;
const { title, description, image, publishDate, tags } = post.data;

// Formatear fecha bonito
const formattedDate = publishDate.toLocaleDateString('es-AR', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article
  class="group flex h-full flex-col overflow-hidden rounded-2xl border border-pink-50 bg-white shadow-sm transition-all duration-300 hover:shadow-xl"
>
  <div class="relative h-48 overflow-hidden">
    <img
      src={image}
      alt={title}
      class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"
    />
    <div
      class="absolute left-4 top-4 rounded-full bg-white/90 px-3 py-1 text-xs font-bold text-glam-navy shadow-sm backdrop-blur-sm"
    >
      {formattedDate}
    </div>
  </div>

  <div class="flex flex-grow flex-col p-6">
    <div class="mb-3 flex gap-2">
      {
        tags?.map((tag) => (
          <span class="rounded-md bg-pink-50 px-2 py-1 text-[0.65rem] font-bold uppercase tracking-wider text-pink-500">
            {tag}
          </span>
        ))
      }
    </div>

    <a href={`/blog/${post.slug}`}>
      <Heading tagName="h3" size="sm" className="mb-3 transition-colors group-hover:text-pink-500">
        {title}
      </Heading>
    </a>

    <p class="mb-4 line-clamp-3 flex-grow text-sm text-glam-gray">
      {description}
    </p>

    <a
      href={`/blog/${post.slug}`}
      class="inline-flex items-center text-sm font-semibold text-glam-navy transition-transform group-hover:translate-x-2"
    >
      Leer más <span class="ml-2">→</span>
    </a>
  </div>
</article>
